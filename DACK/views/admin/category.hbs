<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang=""> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8" lang=""> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9" lang=""> <![endif]-->
<!--[if gt IE 8]><!-->
<!-- <html class="no-js" lang="">
 -->
<!--<![endif]-->
<!DOCTYPE html>
<html>

<head>
    {{>head-admin}}
</head>

<body>
    <!-- Left Panel -->
    {{> nav-admin}}
    <div id="right-panel" class="right-panel">
        <!-- Header-->
        {{> header-admin}}
        <div class="content mt-3">
            <div class="animated fadeIn">
                <div class="row">
                    <div class="col-md-12">
                        <div class="card">
                            <div class="card-header">
                                <strong class="card-title">Quản lý loại sản phẩm</strong>
                                <button class="btn btn-primary" style="float: right; " data-toggle="modal" data-target="#add">New</button>
                            </div>
                            <div class="card-body">
                                <table class="table table-striped table-bordered" id="data-tbl">
                                    <thead>
                                        <tr>
                                            <th>Mã loại</th>
                                            <th>Tên loại</th>
                                            {{!--
                                            <th>Mục lớn</th> --}}
                                            <th>Action</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {{#each category}}
                                        <tr>
                                            <td>{{MaLoai}}</td>
                                            <td>{{TenLoai}}</td>
                                            {{!--
                                            <td>Không có</td> --}}
                                            <td>
                                                <center>
                                                    <div class="btn-group btn-group-xs">
                                                        <a href="#" data-toggle="modal" data-target="#edit" class="btn btn-xs btn-default">
                                                            <i class="fa fa-pencil" ></i>
                                                        </a>
                                                        <!-- <a href="javascript:void(0)" data-toggle="tooltip" title="" class="btn btn-xs btn-danger" data-original-title="Delete"><i class="fa fa-times"></i></a> -->
                                                        <a href="/category/delete?id={{MaLoai}}" class="btn btn-xs btn-danger" id="del-btn">
                      <i class="fa fa-times"></i>
                    </a>
                                                    </div>
                                                </center>
                                            </td>
                                        </tr>
                                        {{/each}}
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- .content -->
    </div>
    <div class="modal fade" id="add" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title" id="myModalLabel"> THÊM LOẠI SẢN PHẨM</h4>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span></button>
                </div>
                <div class="modal-body">
                    <div class="form-group row">
                        <label class="control-label col-md-2">Mã loại</label>
                        <div class="col-md-9">
                            <input class="form-control" id="code" placeholder="Nhập mã loại sản phẩm" type="text">
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="control-label col-md-2">Tên loại</label>
                        <div class="col-md-9">
                            <input class="form-control" id="namecategory" placeholder="Nhập mã khách hàng" type="text">
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="control-label col-md-2">Mục lớn</label>
                        <div class="col-md-9">
                            <select name="select" id="select" class="form-control">
                                <option value="0">Không có</option>
                                <option value="1">Túi xách</option>
                                <option value="2">Balo</option>
                                <option value="3">Túi xách nữ</option>
                                <option value="4">Balo du lịch phượt</option>
                            </select>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-primary" id="add-btn"> Add </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="edit" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title" id="myModalLabel"> THÔNG TIN LOẠI SẢN PHẨM</h4>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span></button>
                </div>
                <div class="modal-body">
                    <div class="form-group row">
                        <label class="control-label col-md-2">Mã loại</label>
                        <div class="col-md-9">
                            <input class="form-control" id="code" value="TX" type="text">
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="control-label col-md-2">Tên loại</label>
                        <div class="col-md-9">
                            <input class="form-control" id="name-category" value="Túi xách" type="text">
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="control-label col-md-2">Mục lớn</label>
                        <div class="col-md-9">
                            <select name="select" id="select" class="form-control">
                                <option value="0">Không có</option>
                                <option value="1">Túi xách</option>
                                <option value="2">Balo</option>
                                <option value="3">Túi xách nữ</option>
                                <option value="4">Balo du lịch phượt</option>
                            </select>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-primary" id="sign-in-btn"> Update </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    {{> js}}
    <script type="text/javascript">
    $('#add-btn').on('click', function() {

        var data = {
            code: $('#code').val(),
            namecategory: $('#namecategory').val()
        };
        console.log(data);

        $.ajax({
            url: '/category',
            method: 'POST',
            // type: 'POST',
            // contentType:'application/json',
            data: data,
            success: function(response) {
                console.log('success');
                //alert('hhihii');
                console.log(data);
                TT(data);
            },
            error: function(err) {
                alert(err);
            }
        });
    });

    function TT(item) {
        var tr = document.createElement('tr');

        $("<td>" + item.code + "</td>").appendTo(tr);
        $("<td>" + item.namecategory + "</td>").appendTo(tr);
        $('<td> <center>' +
            '<div class="btn-group btn-group-xs">' +
            '<a href="#" data-toggle="modal" data-target="#edit" class="btn btn-xs btn-default">' +
            '<i class="fa fa-pencil" ></i>' +
            '</a>' +
            ' <a href="/category/delete?id=' + item.code + '" class="btn btn-xs btn-danger" id ="del-btn">' +
            '<i class="fa fa-times"></i>' +
            '</a> </div> </center></td>').appendTo(tr);
        console.log(tr);
        $("#data-tbl tbody").append(tr);
        console.log($('#data-tbl tbody'));
    };
    </script>
</body>

</html>